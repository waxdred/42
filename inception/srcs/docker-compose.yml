version: "3.7"

networks:
    localhost:

volumes:
    workpress:

    mariadb:


services:
        nginx:
          depends_on:
            - workpress
          container_name: nginx
          build: ./nginx 
          image: ./nginx
          ports: 
            - "433:433"
          networks:
          restart: always

        mariadb:
          container_name: mariadb
          build: ./mariadb 
          image: ./mariadb 
          volumes:
            - mariadb:/var/www/mysql
          networks:
            - localhost
          restart: always

        workpress:
          depends_on:
            - mariadb
          container_name: workpress
          build: ./workpress 
          image: ./workpress
          volumes:
            - workpress:/var/www/workpress
          restart: always
